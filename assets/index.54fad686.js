import{p as e,a,r as l,c as r,o as s,w as t,b as i,d as n,e as u,t as o,f as c,u as v,F as d,g as b,h as m,v as _,n as g,i as h,j as p}from"./vendor.9de56194.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var y=[{serial_number:1,integral_behavior:"参与1次英雄转盘",integral_value:8e3},{serial_number:2,integral_behavior:"消耗1个稀有英雄信物进行英雄升星",integral_value:350},{serial_number:3,integral_behavior:"消耗1个史诗英雄信物进行英雄升星",integral_value:1220},{serial_number:4,integral_behavior:"消耗1个传说英雄信物进行英雄升星",integral_value:3040},{serial_number:5,integral_behavior:"领主装备（宝石）最高评分提升1点",integral_value:70},{serial_number:6,integral_behavior:"消耗1个英雄装备锻造锤",integral_value:4e3},{serial_number:7,integral_behavior:"消耗1个任意英雄专属装备对应的组件",integral_value:8e3},{serial_number:8,integral_behavior:"消耗1个秘银",integral_value:4e4},{serial_number:9,integral_behavior:"消耗1块黄金进行建筑升级",integral_value:2e3},{serial_number:10,integral_behavior:"消耗1分钟加速进行建造",integral_value:30},{serial_number:11,integral_behavior:"消耗1分钟加速进行研究",integral_value:30},{serial_number:12,integral_behavior:"消耗1分钟加速进行士兵训练、士兵晋升",integral_value:30},{serial_number:13,integral_behavior:"宠物突破评分提高1点",integral_value:50},{serial_number:14,integral_behavior:"消耗1个高级驯化印记进行宠物洗炼",integral_value:15e3},{serial_number:15,integral_behavior:"消耗1个普通驯化印记进行宠物洗炼",integral_value:1150},{serial_number:16,integral_behavior:"训练1位9级士兵",integral_value:45},{serial_number:17,integral_behavior:"训练1位10级士兵",integral_value:60},{serial_number:18,integral_behavior:"完成1项事件",integral_value:6e3},{serial_number:19,integral_behavior:"在野外收集1,000份面包",integral_value:2},{serial_number:20,integral_behavior:"在野外采集1,000份木材",integral_value:2},{serial_number:21,integral_behavior:"在野外采集200份石材",integral_value:2},{serial_number:22,integral_behavior:"在野外采集50份铁矿",integral_value:2}];e("data-v-0719b88e");const f={class:"page"},w={class:"page-header"},k={class:"page-title"},N=u("p",{class:"page-subtitle"},"快速查看和计算不同行为对应的积分价值",-1),C={class:"card calculator-card"},S=u("h2",{class:"card-title"},"国战备战积分计算工具",-1),O=u("p",{class:"card-desc card-from"},"77王国CCC联盟出品",-1),P=u("p",{class:"card-desc"}," 点击下方任意行为，在弹窗中填写本次数量，再把对应积分累加到总分。 ",-1),A={class:"summary-row"},L={class:"result-badge total"},x=u("span",{class:"result-label"},"当前总积分",-1),F={class:"result-value"},I={key:0,class:"last-info"},M=u("div",{class:"last-title"},"最近一次操作",-1),j={class:"last-detail"},E=["disabled"],J=["disabled"],q=["disabled"],z={class:"card table-card"},B=u("h2",{class:"card-title"},"积分行为列表",-1),K=u("p",{class:"card-desc"}," 点击任意一行，在弹窗中填写数量后将该行为积分累加到上方总积分。 ",-1),U={class:"table-wrapper desktop-table"},V={class:"data-table"},D=u("thead",null,[u("tr",null,[u("th",{style:{width:"56px"}},"序号"),u("th",null,"积分行为"),u("th",{style:{width:"80px"},class:"th-right"},"数量"),u("th",{style:{width:"120px"},class:"th-right"},"单次积分值"),u("th",{style:{width:"120px"},class:"th-right"},"得分")])],-1),G=["onClick"],H={class:"td-right"},Q={class:"td-right"},R={class:"tag"},T={class:"td-right"},W={class:"mobile-list"},X=["onClick"],Y={class:"mobile-row-main"},Z={class:"mobile-row-title"},$={class:"mobile-row-score"},ee={class:"mobile-row-sub"},ae={key:0,class:"modal-mask"},le={class:"modal-container"},re=u("div",{class:"modal-header"},[u("div",{class:"modal-title"},"填写次数")],-1),se={key:0,class:"modal-body"},te={class:"modal-row"},ie=u("span",{class:"modal-label"},"积分行为",-1),ne={class:"modal-value"},ue={class:"modal-row"},oe=u("span",{class:"modal-label"},"每次积分",-1),ce={class:"modal-value"},ve={class:"modal-row"},de=u("span",{class:"modal-label"},"本次数量",-1),be={key:1,class:"modal-mask"},me={class:"modal-container"},_e=u("div",{class:"modal-header"},[u("div",{class:"modal-title"},"历史操作")],-1),ge={class:"modal-body"},he={key:0},pe={key:1,class:"history-list"},ye={class:"history-main"},fe={class:"history-name"},we={class:"history-total"},ke={class:"history-sub"};a();const Ne={props:{msg:String},setup(e){const a=y,h=l(0),p=l(null),Ne=l([]),Ce=l(!1),Se=l(null),Oe=l("1"),Pe=l(!1),Ae="bb_integral_history_v1",Le=e=>{const a=Number(e);return Number.isFinite(a)?a.toLocaleString("zh-CN"):e},xe=e=>{Se.value=e;const a=Ne.value.filter((a=>a.serial_number===e.serial_number)).reduce(((e,a)=>e+a.count),0);Oe.value=String(a||0),Ce.value=!0},Fe=()=>{Pe.value=!0},Ie=()=>{Ce.value=!1,Se.value=null},Me=()=>{Pe.value=!1},je=()=>{if(!Se.value)return;const e=Number(Oe.value);if(!Number.isFinite(e)||e<=0)return;const a=Math.floor(e),l=Se.value,r=a-Ne.value.filter((e=>e.serial_number===l.serial_number)).reduce(((e,a)=>e+a.count),0);if(!r)return void Ie();const s={serial_number:l.serial_number,count:r};h.value+=l.integral_value*r,Ne.value.push(s),p.value=l,Ie()},Ee=()=>{h.value=0,p.value=null,Ne.value=[]},Je=()=>{if(!Ne.value.length)return;const e=Ne.value.pop(),l=a.find((a=>a.serial_number===e.serial_number));if(l&&(h.value-=l.integral_value*e.count,h.value<0&&(h.value=0)),Ne.value.length){const e=Ne.value[Ne.value.length-1];p.value=a.find((a=>a.serial_number===e.serial_number))||null}else p.value=null},qe=r((()=>Ne.value.length>0)),ze=r((()=>{const e={};return Ne.value.forEach((a=>{const l=a.serial_number;e[l]||(e[l]=0),e[l]+=a.count})),e})),Be=r((()=>Ne.value.map(((e,l)=>{const r=a.find((a=>a.serial_number===e.serial_number));return r?{id:l,behavior:r,count:e.count,pointsPer:r.integral_value,total:r.integral_value*e.count}:null})).filter(Boolean)));return s((()=>{if("undefined"==typeof window)return;const e=window.localStorage.getItem(Ae);if(e)try{const l=JSON.parse(e);if("number"==typeof l.totalPoints&&(h.value=l.totalPoints),Array.isArray(l.historyOps)?Ne.value=l.historyOps.map((e=>({serial_number:Number(e.serial_number),count:Number(e.count)>0?Math.floor(Number(e.count)):0}))).filter((e=>e.count>0)):Array.isArray(l.historySerials)&&(Ne.value=l.historySerials.map((e=>({serial_number:Number(e),count:1}))).filter((e=>Number.isFinite(e.serial_number)))),Ne.value.length){const e=Ne.value[Ne.value.length-1];p.value=a.find((a=>a.serial_number===e.serial_number))||null}}catch{}})),t([Ne,h],(()=>{if("undefined"==typeof window)return;const e={totalPoints:h.value,historyOps:Ne.value.map((e=>({serial_number:e.serial_number,count:e.count})))};window.localStorage.setItem(Ae,JSON.stringify(e))}),{deep:!0}),(l,r)=>(i(),n("div",f,[u("header",w,[u("h1",k,o(e.msg),1),N]),u("section",C,[S,O,P,u("div",A,[u("div",L,[x,u("span",F,o(Le(h.value)),1)]),p.value?(i(),n("div",I,[M,u("div",j,o(p.value.integral_behavior)+" (+"+o(Le(p.value.integral_value))+") ",1)])):c("",!0),u("button",{type:"button",class:"reset-button secondary",onClick:Je,disabled:!v(qe)}," 撤销上一步 ",8,E),u("button",{type:"button",class:"reset-button secondary",onClick:Fe,disabled:!v(qe)}," 查看历史 ",8,J),u("button",{type:"button",class:"reset-button",onClick:Ee,disabled:0===h.value}," 清零 ",8,q)])]),u("section",z,[B,K,u("div",U,[u("table",V,[D,u("tbody",null,[(i(!0),n(d,null,b(v(a),(e=>(i(),n("tr",{key:e.serial_number,class:g(["data-row"]),onClick:a=>xe(e)},[u("td",null,o(e.serial_number),1),u("td",null,o(e.integral_behavior),1),u("td",H,o(Le(v(ze)[e.serial_number]||0)),1),u("td",Q,[u("span",R,o(Le(e.integral_value)),1)]),u("td",T,o(Le((v(ze)[e.serial_number]||0)*e.integral_value)),1)],8,G)))),128))])])]),u("div",W,[(i(!0),n(d,null,b(v(a),(e=>(i(),n("div",{key:e.serial_number,class:"mobile-row",onClick:a=>xe(e)},[u("div",Y,[u("div",Z,o(e.integral_behavior),1),u("div",$," 积分:"+o(Le(e.integral_value)),1)]),u("div",ee,[u("span",null,"数量："+o(Le(v(ze)[e.serial_number]||0)),1),u("span",null," +"+o(Le((v(ze)[e.serial_number]||0)*e.integral_value)),1)])],8,X)))),128))])]),Ce.value?(i(),n("div",ae,[u("div",le,[re,Se.value?(i(),n("div",se,[u("div",te,[ie,u("span",ne,o(Se.value.integral_behavior),1)]),u("div",ue,[oe,u("span",ce,o(Se.value.integral_value),1)]),u("div",ve,[de,m(u("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>Oe.value=e),type:"number",min:"1",class:"modal-input"},null,512),[[_,Oe.value]])])])):c("",!0),u("div",{class:"modal-footer"},[u("button",{type:"button",class:"modal-button secondary",onClick:Ie}," 取消 "),u("button",{type:"button",class:"modal-button",onClick:je}," 确认 ")])])])):c("",!0),Pe.value?(i(),n("div",be,[u("div",me,[_e,u("div",ge,[v(Be).length?(i(),n("div",pe,[(i(!0),n(d,null,b(v(Be),(e=>(i(),n("div",{key:e.id,class:"history-item"},[u("div",ye,[u("span",fe,o(e.behavior.integral_behavior),1),u("span",we,"+"+o(Le(e.total)),1)]),u("div",ke," 次数："+o(Le(e.count))+"，每次："+o(Le(e.pointsPer)),1)])))),128))])):(i(),n("div",he,"暂无历史记录"))]),u("div",{class:"modal-footer"},[u("button",{type:"button",class:"modal-button secondary",onClick:Me}," 关闭 ")])])])):c("",!0)]))},__scopeId:"data-v-0719b88e"};const Ce={class:"app-shell"};p({setup:e=>(e,a)=>(i(),n("div",Ce,[h(Ne,{msg:"奔奔王国 · 积分计算"})]))}).mount("#app");
